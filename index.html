<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Proba</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
    <script src="https://preview.babylonjs.com/ammo.js"></script>
    <script src="https://preview.babylonjs.com/cannon.js"></script>
    <script src="https://preview.babylonjs.com/Oimo.js"></script>
    <script src="https://preview.babylonjs.com/earcut.min.js"></script>
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
    <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
    <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
    <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
    <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
    <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>
    <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
    <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        var canvas = document.getElementById("renderCanvas");

        var engine = null;
        var scene = null;
        var sceneToRender = null;
        var createDefaultEngine = function () { return new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true, disableWebGL2Support: false }); };
        const createScene = () => {
            const scene = new BABYLON.Scene(engine);
            //scene.debugLayer.show();

            const camera = new BABYLON.ArcRotateCamera("camera", -Math.PI / 2, Math.PI / 2.5, 3, new BABYLON.Vector3(0, 0, 0));
            camera.attachControl(canvas, true);

            //const camera1 = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(1, 15, 1), scene);
            //camera1.target = new BABYLON.Vector3(1, 0, 1);

            var hl = new BABYLON.HighlightLayer("hl1", scene);
            var gizmoManager = new BABYLON.GizmoManager(scene);

            const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0));
            BABYLON.SceneLoader.ImportMesh("", "models/", "Stul001.babylon", scene, function (mesh) {
            });
               let advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("GUI", true, scene);
            let loadedGUI = advancedTexture.parseFromSnippetAsync("2V1V3P#2");

          

            //------------First Grid-----------
            var firstGrid = advancedTexture.getControlByName("firstGrid");
           // firstGrid.isVisible == false;

            // --------TextBlock  "Сведения о модели"

            var nameModelText = advancedTexture.getControlByName("nameModelText");
            nameModelText.text = "Венский стул";
            var nameKarksTextureText = advancedTexture.getControlByName("nameKarksTextureText");
            nameKarksTextureText.text = "Нет текстуры";
            var nameSidshkTextureText = advancedTexture.getControlByName("nameSidshkTextureText");
            nameSidshkTextureText.text = "Нет текстуры";

            // --------TextBlock  "Кнопки"
            var sidshkBtnText = advancedTexture.getControlByName("sidshkBtnText");
            sidshkBtnText.text = "Сидение";
            var korpsBtnText = advancedTexture.getControlByName("korpsBtnText");
            korpsBtnText.text = "Каркас";

            //---------- SLIDERS --------------------

            // --------TextBlock  "Сайдеры"
            var textAxisX = advancedTexture.getControlByName("textAxisX");
            textAxisX.text = "Ось X";
            textAxisX.color = "#fff";
            var textAxisY = advancedTexture.getControlByName("textAxisY");
            textAxisY.text = "Ось Y";
            textAxisY.color = "#fff";
            var textAxisZoom = advancedTexture.getControlByName("textAxisZoom");
            textAxisZoom.text = "Масштаб";
            textAxisZoom.color = "#fff";

            //---------свойства Slider
            var xSlider = advancedTexture.getControlByName("xSlider");
            xSlider.color = "#fff";
            xSlider.barOffset = "8px";
            xSlider.thumbWidth = "40px";
            xSlider.background = "#276D39FF";

            var ySlider = advancedTexture.getControlByName("ySlider");
            ySlider.color = "#fff";
            ySlider.barOffset = "8px";
            ySlider.thumbWidth = "40px";
            ySlider.background = "#276D39FF";

            var zSlider = advancedTexture.getControlByName("zSlider");
            zSlider.color = "#fff";
            zSlider.barOffset = "8px";
            zSlider.thumbWidth = "40px";
            zSlider.background = "#276D39FF";

            //------------------sidshkTextureGrid---------------------

            var textrBtn01 = advancedTexture.getControlByName("textrBtn01");
          //  textrBtn01.height = "95%";
          //  textrBtn01.autoScale = true;
          //  var imageTextureBtn01 = advancedTexture.getControlByName("imageTextureBtn01");

            


            //TODO присвоить текстуру imageTextureBtn01
            var textrBtn02 = advancedTexture.getControlByName("textrBtn02");
           // textrBtn02.height = "95%";
            //var imageTextureBtn02 = advancedTexture.getControlByName("imageTextureBtn02");
            //TODO присвоить текстуру imageTextureBtn02

            var textrBtn03 = advancedTexture.getControlByName("textrBtn03");
          //  textrBtn03.height = "95%";
            //var imageTextureBtn03 = advancedTexture.getControlByName("imageTextureBtn03");
            //TODO присвоить текстуру imageTextureBtn01

            var textrBtn04 = advancedTexture.getControlByName("textrBtn04");
           // textrBtn04.height = "95%";
            //var imageTextureBtn04 = advancedTexture.getControlByName("imageTextureBtn04");
            //TODO присвоить текстуру imageTextureBtn01


            

            return scene;
        }
        var engine;
        var scene;
        initFunction = async function () {
            var asyncEngineCreation = async function () {
                try {
                    return createDefaultEngine();
                } catch (e) {
                    console.log("the available createEngine function failed. Creating the default engine instead");
                    return createDefaultEngine();
                }
            }

            engine = await asyncEngineCreation();
            if (!engine) throw 'engine should not be null.';
            scene = createScene();
        };
        initFunction().then(() => {
            sceneToRender = scene
            engine.runRenderLoop(function () {
                if (sceneToRender && sceneToRender.activeCamera) {
                    sceneToRender.render();
                }
            });
        });

        // Resize
        window.addEventListener("resize", function () {
            engine.resize();
        });

    </script>
</body>
</html>
